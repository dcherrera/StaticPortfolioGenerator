var SPGPlugin=function(e,oe){"use strict";const W={githubToken:"",projectId:""},B="app/public/content",O="http://localhost:4446";async function A(o,t){const a=new URLSearchParams({path:t}),n=await fetch(`${O}/files/${o}/read?${a}`);if(!n.ok)throw new Error(`Failed to read file: ${n.statusText}`);return(await n.json()).content}async function M(o,t,a){const n=await fetch(`${O}/files/${o}/write`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:a})});if(!n.ok)throw new Error(`Failed to write file: ${n.statusText}`)}async function ne(o,t){const a=await fetch(`${O}/files/${o}/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t})});if(!a.ok)throw new Error(`Failed to create directory: ${a.statusText}`)}async function ae(o,t){try{const a=new URLSearchParams({path:t});return(await fetch(`${O}/files/${o}/info?${a}`)).ok}catch{return!1}}async function Y(o,t){const a=t.split("/").filter(Boolean);let n="";for(const l of a)n=n?`${n}/${l}`:l,await ae(o,n)||await ne(o,n)}const K=`${B}/manifest.json`;async function H(o){try{const t=await A(o,K);return JSON.parse(t)}catch(t){return console.error("Failed to load manifest:",t),null}}async function J(o,t){try{return await M(o,K,JSON.stringify(t,null,2)),!0}catch(a){return console.error("Failed to save manifest:",a),!1}}async function le(o,t){const a=await H(o);return a?a.projects.some(n=>n.slug===t.slug)?(console.error("Project already exists:",t.slug),!1):(a.projects.push(t),await J(o,a)):!1}async function se(o,t){const a=await H(o);return a?a.blog.some(n=>n.path===t.path)?(console.error("Blog post already exists:",t.path),!1):(a.blog.push(t),await J(o,a)):!1}async function ie(o,t){const a=await H(o);return a?a.pages.some(n=>n.path===t.path)?(console.error("Page already exists:",t.path),!1):(a.pages.push(t),await J(o,a)):!1}const Q="https://api.github.com";function v(o){const t={Accept:"application/vnd.github.v3+json"};return o&&(t.Authorization=`Bearer ${o}`),t}async function re(o){const t=[];let a=1;const n=100;for(;;){const l=await fetch(`${Q}/user/repos?per_page=${n}&page=${a}&sort=updated&direction=desc`,{headers:v(o)});if(!l.ok)throw new Error(`Failed to fetch repos: ${l.statusText}`);const s=await l.json();for(const i of s)t.push({fullName:i.full_name,name:i.name,private:i.private,description:i.description});if(s.length<n)break;a++}return t}async function ce(o,t,a){try{const n=await fetch(`${Q}/repos/${t}/${a}/readme`,{headers:{...v(o),Accept:"application/vnd.github.raw"}});return n.ok?await n.text():null}catch{return null}}async function de(o,t,a,n=20){const l=await fetch(`${Q}/repos/${t}/${a}/commits?per_page=${n}`,{headers:v(o)});if(!l.ok)throw new Error(`Failed to fetch commits: ${l.statusText}`);return(await l.json()).map(i=>{var r,h,w;return{sha:i.sha,message:i.commit.message,date:((r=i.commit.author)==null?void 0:r.date)||new Date().toISOString(),author:((h=i.author)==null?void 0:h.login)||((w=i.commit.author)==null?void 0:w.name)||"unknown",url:i.html_url,hidden:!1}})}function X(o){const t=o.match(/github\.com\/([^\/]+)\/([^\/\.]+)/);if(t)return{owner:t[1],repo:t[2]};const a=o.match(/git@github\.com:([^\/]+)\/([^\.]+)/);if(a)return{owner:a[1],repo:a[2]};const n=o.match(/^([^\/]+)\/([^\/]+)$/);return n?{owner:n[1],repo:n[2]}:null}const Z="spg-plugin-settings",F=oe.defineStore("spg",()=>{const o=e.ref(c()),t=e.ref(null),a=e.ref({}),n=e.ref([]),l=e.ref(!1),s=e.ref(null),i=e.ref(null),r=e.computed(()=>!!o.value.projectId),h=e.computed(()=>!!o.value.githubToken),w=e.computed(()=>{var f;return((f=t.value)==null?void 0:f.projects)??[]}),_=e.computed(()=>{var f;return((f=t.value)==null?void 0:f.blog)??[]}),C=e.computed(()=>{var f;return((f=t.value)==null?void 0:f.pages)??[]}),m=e.computed(()=>{var f;return i.value?((f=a.value[i.value])==null?void 0:f.commits)??[]:[]});function c(){try{const f=localStorage.getItem(Z);if(f)return{...W,...JSON.parse(f)}}catch{}return{...W}}function V(){localStorage.setItem(Z,JSON.stringify(o.value))}function d(f){o.value.projectId=f,V()}function p(f){o.value.githubToken=f,V()}async function b(){if(!o.value.projectId){s.value="No project selected";return}l.value=!0,s.value=null;try{t.value=await H(o.value.projectId),t.value||(s.value="Failed to load manifest - is this a Static Portfolio Generator project?")}catch(f){s.value=f instanceof Error?f.message:"Failed to load manifest",t.value=null}finally{l.value=!1}}async function g(){if(!o.value.githubToken){s.value="GitHub token not configured";return}l.value=!0,s.value=null;try{n.value=await re(o.value.githubToken)}catch(f){s.value=f instanceof Error?f.message:"Failed to fetch repos"}finally{l.value=!1}}async function u(f){var $,T;const y=f||i.value;if(!y||!o.value.projectId)return;const N=($=t.value)==null?void 0:$.projects.find(P=>P.slug===y);if(N!=null&&N.configPath){l.value=!0,s.value=null;try{const P=`${B}${N.configPath.replace("/content","")}`,x=await A(o.value.projectId,P),E=x.match(/repo:\s*(.+)/);if(!E){s.value="No repo configured for this project";return}const j=X(E[1].trim());if(!j){s.value="Could not parse repo URL";return}const k=x.match(/commitsLimit:\s*(\d+)/),U=k?parseInt(k[1],10):20,q=await de(o.value.githubToken,j.owner,j.repo,U),R=x.match(/hiddenCommits:\s*\[([\s\S]*?)\]/),te=new Set;if(R){const G=R[1].match(/['"]([a-f0-9]+)['"]/g);if(G)for(const ft of G)te.add(ft.replace(/['"]/g,""))}for(const G of q)G.hidden=te.has(G.sha);a.value[y]={repo:E[1].trim(),lastFetched:new Date().toISOString(),latestSha:(T=q[0])==null?void 0:T.sha,commits:q}}catch(P){s.value=P instanceof Error?P.message:"Failed to refresh commits"}finally{l.value=!1}}}async function S(f,y,N){var T;if(!o.value.projectId)return;const $=(T=t.value)==null?void 0:T.projects.find(P=>P.slug===f);if($!=null&&$.configPath)try{const P=`${B}${$.configPath.replace("/content","")}`;let x=await A(o.value.projectId,P);const E=x.match(/hiddenCommits:\s*\[([\s\S]*?)\]/);let j=[];if(E){const q=E[1].match(/['"]([a-f0-9]+)['"]/g);q&&(j=q.map(R=>R.replace(/['"]/g,"")))}N&&!j.includes(y)?j.push(y):N||(j=j.filter(q=>q!==y));const k=`hiddenCommits: [${j.map(q=>`'${q}'`).join(", ")}]`;E?x=x.replace(/hiddenCommits:\s*\[[\s\S]*?\]/,k):x=x.trim()+`
${k}
`,await M(o.value.projectId,P,x);const U=a.value[f];if(U){const q=U.commits.find(R=>R.sha===y);q&&(q.hidden=N)}}catch(P){s.value=P instanceof Error?P.message:"Failed to toggle commit visibility"}}async function D(f){var N;if(!o.value.projectId||!o.value.githubToken)return;const y=(N=t.value)==null?void 0:N.projects.find($=>$.slug===f);if(y!=null&&y.configPath){l.value=!0,s.value=null;try{const $=`${B}${y.configPath.replace("/content","")}`,P=(await A(o.value.projectId,$)).match(/repo:\s*(.+)/);if(!P){s.value="No repo configured for this project";return}const x=X(P[1].trim());if(!x){s.value="Could not parse repo URL";return}const E=await ce(o.value.githubToken,x.owner,x.repo);if(!E){s.value="No README found in repository";return}const j=`${B}/projects/${f}/index.md`,U=(await A(o.value.projectId,j)).match(/^---\n([\s\S]*?)\n---\n?/);let q;U?q=U[0]+`
`+E:q=E,await M(o.value.projectId,j,q)}catch($){s.value=$ instanceof Error?$.message:"Failed to pull README"}finally{l.value=!1}}}function I(f){i.value=f}return{settings:o,manifest:t,commitsCache:a,userRepos:n,isLoading:l,error:s,selectedProjectSlug:i,isConfigured:r,hasGitHubToken:h,projects:w,blogPosts:_,pages:C,selectedProjectCommits:m,setProjectId:d,setGitHubToken:p,loadManifest:b,fetchUserRepos:g,refreshCommits:u,toggleCommitVisibility:S,pullReadme:D,selectProject:I}}),me={class:"spg-nav"},pe={class:"spg-nav-header"},fe={class:"spg-nav-status"},ue={class:"spg-nav-status-text"},ge=e.defineComponent({__name:"PluginNav",setup(o){const t=F(),a=e.ref(!1),n=e.ref(t.settings.projectId),l=e.ref(t.settings.githubToken);function s(){t.setProjectId(n.value),t.setGitHubToken(l.value),a.value=!1,n.value&&t.loadManifest()}return e.onMounted(()=>{t.isConfigured&&t.loadManifest()}),(i,r)=>{const h=e.resolveComponent("q-icon"),w=e.resolveComponent("q-btn"),_=e.resolveComponent("q-card-section"),C=e.resolveComponent("q-input"),m=e.resolveComponent("q-card-actions"),c=e.resolveComponent("q-card"),V=e.resolveComponent("q-dialog"),d=e.resolveDirective("close-popup");return e.openBlock(),e.createElementBlock("div",me,[e.createElementVNode("div",pe,[e.createVNode(h,{name:"web",size:"24px"}),r[4]||(r[4]=e.createElementVNode("span",{class:"spg-nav-title"},"Portfolio",-1))]),e.createElementVNode("div",fe,[e.createVNode(h,{name:e.unref(t).isConfigured?"check_circle":"warning",color:e.unref(t).isConfigured?"positive":"warning",size:"16px"},null,8,["name","color"]),e.createElementVNode("span",ue,e.toDisplayString(e.unref(t).isConfigured?"Connected":"No project selected"),1)]),e.createVNode(w,{flat:"",dense:"",icon:"settings",label:"Settings",class:"spg-nav-btn",onClick:r[0]||(r[0]=p=>a.value=!0)}),e.createVNode(V,{modelValue:a.value,"onUpdate:modelValue":r[3]||(r[3]=p=>a.value=p)},{default:e.withCtx(()=>[e.createVNode(c,{style:{"min-width":"350px"}},{default:e.withCtx(()=>[e.createVNode(_,null,{default:e.withCtx(()=>[...r[5]||(r[5]=[e.createElementVNode("div",{class:"text-h6"},"Plugin Settings",-1)])]),_:1}),e.createVNode(_,null,{default:e.withCtx(()=>[e.createVNode(C,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=p=>n.value=p),label:"Project ID",hint:"The repository identifier for file operations",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode(C,{modelValue:l.value,"onUpdate:modelValue":r[2]||(r[2]=p=>l.value=p),label:"GitHub Token",hint:"Personal access token for GitHub API",outlined:"",dense:"",type:"password"},null,8,["modelValue"])]),_:1}),e.createVNode(m,{align:"right"},{default:e.withCtx(()=>[e.withDirectives(e.createVNode(w,{flat:"",label:"Cancel"},null,512),[[d]]),e.createVNode(w,{color:"primary",label:"Save",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),L=(o,t)=>{const a=o.__vccOpts||o;for(const[n,l]of t)a[n]=l;return a},_e=L(ge,[["__scopeId","data-v-b459b501"]]),he={class:"site-structure"},Ve={class:"section"},Ce={class:"section-count"},Ne={key:0,class:"section-items"},we=["onClick"],$e={class:"item-name"},ke={class:"item-actions"},ye={key:0,class:"empty-state"},be={class:"section"},Pe={class:"section-count"},qe={key:0,class:"section-items"},xe=["onClick"],je={class:"item-name"},Ee={class:"item-meta"},Be={key:0,class:"empty-state"},Se={class:"section"},De={class:"section-count"},Te={key:0,class:"section-items"},Fe=["onClick"],Ie={class:"item-name"},Me={key:0,class:"empty-state"},Ue=L(e.defineComponent({__name:"SiteStructure",emits:["newProject","newBlogPost","newPage","deleteProject","deleteBlogPost","deletePage","openFile"],setup(o,{emit:t}){const a=F(),n=e.ref(!0),l=e.ref(!0),s=e.ref(!0),i=t;function r(m){a.selectProject(m.slug),i("openFile",m.indexPath)}function h(m){i("openFile",m)}function w(m){return"active"}function _(m){var c;return((c=m.split("/").pop())==null?void 0:c.replace(".md",""))||m}function C(m){const c=m.match(/(\d{4}-\d{2}-\d{2})/);return c?c[1]:""}return(m,c)=>{const V=e.resolveComponent("q-icon"),d=e.resolveComponent("q-btn");return e.openBlock(),e.createElementBlock("div",he,[e.createElementVNode("div",Ve,[e.createElementVNode("div",{class:"section-header",onClick:c[1]||(c[1]=p=>n.value=!n.value)},[e.createVNode(V,{name:n.value?"expand_more":"chevron_right",size:"20px"},null,8,["name"]),c[6]||(c[6]=e.createElementVNode("span",{class:"section-title"},"Projects",-1)),e.createElementVNode("span",Ce,"("+e.toDisplayString(e.unref(a).projects.length)+")",1),e.createVNode(d,{flat:"",dense:"",round:"",icon:"add",size:"sm",class:"add-btn",onClick:c[0]||(c[0]=e.withModifiers(p=>m.$emit("newProject"),["stop"]))})]),n.value?(e.openBlock(),e.createElementBlock("div",Ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).projects,p=>(e.openBlock(),e.createElementBlock("div",{key:p.slug,class:e.normalizeClass(["item",{selected:e.unref(a).selectedProjectSlug===p.slug}]),onClick:b=>r(p)},[e.createElementVNode("span",{class:e.normalizeClass(["status-dot","status-"+w()])},null,2),e.createElementVNode("span",$e,e.toDisplayString(p.slug),1),e.createElementVNode("div",ke,[e.createVNode(d,{flat:"",dense:"",round:"",icon:"sync",size:"xs",title:"Pull README",onClick:e.withModifiers(b=>e.unref(a).pullReadme(p.slug),["stop"])},null,8,["onClick"]),e.createVNode(d,{flat:"",dense:"",round:"",icon:"delete",size:"xs",title:"Delete",onClick:e.withModifiers(b=>m.$emit("deleteProject",p),["stop"])},null,8,["onClick"])])],10,we))),128)),e.unref(a).projects.length===0?(e.openBlock(),e.createElementBlock("div",ye," No projects yet ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",be,[e.createElementVNode("div",{class:"section-header",onClick:c[3]||(c[3]=p=>l.value=!l.value)},[e.createVNode(V,{name:l.value?"expand_more":"chevron_right",size:"20px"},null,8,["name"]),c[7]||(c[7]=e.createElementVNode("span",{class:"section-title"},"Blog Posts",-1)),e.createElementVNode("span",Pe,"("+e.toDisplayString(e.unref(a).blogPosts.length)+")",1),e.createVNode(d,{flat:"",dense:"",round:"",icon:"add",size:"sm",class:"add-btn",onClick:c[2]||(c[2]=e.withModifiers(p=>m.$emit("newBlogPost"),["stop"]))})]),l.value?(e.openBlock(),e.createElementBlock("div",qe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).blogPosts,p=>(e.openBlock(),e.createElementBlock("div",{key:p.path,class:"item",onClick:b=>h(p.path)},[e.createVNode(V,{name:"article",size:"16px",class:"item-icon"}),e.createElementVNode("span",je,e.toDisplayString(_(p.path)),1),e.createElementVNode("span",Ee,e.toDisplayString(C(p.path)),1),e.createVNode(d,{flat:"",dense:"",round:"",icon:"delete",size:"xs",class:"delete-btn",onClick:e.withModifiers(b=>m.$emit("deleteBlogPost",p),["stop"])},null,8,["onClick"])],8,xe))),128)),e.unref(a).blogPosts.length===0?(e.openBlock(),e.createElementBlock("div",Be," No blog posts yet ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Se,[e.createElementVNode("div",{class:"section-header",onClick:c[5]||(c[5]=p=>s.value=!s.value)},[e.createVNode(V,{name:s.value?"expand_more":"chevron_right",size:"20px"},null,8,["name"]),c[8]||(c[8]=e.createElementVNode("span",{class:"section-title"},"Pages",-1)),e.createElementVNode("span",De,"("+e.toDisplayString(e.unref(a).pages.length)+")",1),e.createVNode(d,{flat:"",dense:"",round:"",icon:"add",size:"sm",class:"add-btn",onClick:c[4]||(c[4]=e.withModifiers(p=>m.$emit("newPage"),["stop"]))})]),s.value?(e.openBlock(),e.createElementBlock("div",Te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).pages,p=>(e.openBlock(),e.createElementBlock("div",{key:p.path,class:"item",onClick:b=>h(p.path)},[e.createVNode(V,{name:"description",size:"16px",class:"item-icon"}),e.createElementVNode("span",Ie,e.toDisplayString(_(p.path)),1),e.createVNode(d,{flat:"",dense:"",round:"",icon:"delete",size:"xs",class:"delete-btn",onClick:e.withModifiers(b=>m.$emit("deletePage",p),["stop"])},null,8,["onClick"])],8,Fe))),128)),e.unref(a).pages.length===0?(e.openBlock(),e.createElementBlock("div",Me," No pages yet ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])}}}),[["__scopeId","data-v-297958cd"]]);function Re(o,t,a,n,l,s){const i=n.length>0?`
tech:
${n.map(w=>`  - ${w}`).join(`
`)}`:"",r=s?`
private: true`:"",h=l?`
links:
  repo: ${l}`:"";return`---
title: ${o}
tagline: ${t}
status: ${a}
featured: false
order: 99${i}${r}${h}
---

## Overview

${t}

## Features

- Feature 1
- Feature 2
- Feature 3

## Getting Started

Add installation and usage instructions here.
`}function Ae(o){if(!o)return`# Project configuration
# repo: owner/repo-name
commitsLimit: 20
hiddenCommits: []
`;const t=o.match(/github\.com\/([^\/]+\/[^\/\.]+)/);return`# Project configuration
repo: ${t?t[1]:o}
commitsLimit: 20
hiddenCommits: []
`}function Le(o,t,a,n){const l=a.length>0?`
tags:
${a.map(i=>`  - ${i}`).join(`
`)}`:"",s=n?`
project: ${n}`:"";return`---
title: ${o}
date: ${t}${l}${s}
---

Write your blog post content here.
`}function ze(o){return`---
title: ${o}
---

# ${o}

Add your page content here.
`}function z(o){return o.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function ee(o){const t=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),n=String(o.getDate()).padStart(2,"0");return`${t}-${a}-${n}`}function Ge(o){const t=new Date(o),n=new Date().getTime()-t.getTime(),l=Math.floor(n/(1e3*60*60*24));return l===0?"today":l===1?"yesterday":l<7?`${l}d ago`:l<30?`${Math.floor(l/7)}w ago`:t.toLocaleDateString()}const Oe={class:"commit-curation"},Ye={class:"curation-header"},He={key:0,class:"empty-state"},Je={key:1,class:"empty-state"},Qe={key:2,class:"commits-list"},ve={class:"commit-info"},We={class:"commit-message"},Ke={class:"commit-meta"},Xe={class:"commit-sha"},Ze={class:"commit-date"},et=L(e.defineComponent({__name:"CommitCuration",setup(o){const t=F();function a(){t.selectedProjectSlug&&t.refreshCommits(t.selectedProjectSlug)}function n(i){t.selectedProjectSlug&&t.toggleCommitVisibility(t.selectedProjectSlug,i.sha,!i.hidden)}function l(i){const r=i.split(`
`)[0];return r.length>60?r.substring(0,60)+"...":r}function s(i){return Ge(i)}return(i,r)=>{const h=e.resolveComponent("q-btn"),w=e.resolveComponent("q-checkbox");return e.openBlock(),e.createElementBlock("div",Oe,[e.createElementVNode("div",Ye,[r[0]||(r[0]=e.createElementVNode("span",{class:"curation-title"},"Commit Curation",-1)),e.createVNode(h,{flat:"",dense:"",icon:"sync",size:"sm",loading:e.unref(t).isLoading,onClick:a},null,8,["loading"])]),e.unref(t).selectedProjectSlug?e.unref(t).selectedProjectCommits.length===0?(e.openBlock(),e.createElementBlock("div",Je,[e.unref(t).isLoading?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode("Loading commits...")],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(" No commits. Click refresh to fetch from GitHub. ")],64))])):(e.openBlock(),e.createElementBlock("div",Qe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).selectedProjectCommits,_=>(e.openBlock(),e.createElementBlock("div",{key:_.sha,class:e.normalizeClass(["commit-item",{hidden:_.hidden}])},[e.createVNode(w,{"model-value":!_.hidden,dense:"","onUpdate:modelValue":C=>n(_)},null,8,["model-value","onUpdate:modelValue"]),e.createElementVNode("div",ve,[e.createElementVNode("div",We,e.toDisplayString(l(_.message)),1),e.createElementVNode("div",Ke,[e.createElementVNode("span",Xe,e.toDisplayString(_.sha.substring(0,7)),1),r[1]||(r[1]=e.createElementVNode("span",{class:"commit-sep"},"â€¢",-1)),e.createElementVNode("span",Ze,e.toDisplayString(s(_.date)),1)])])],2))),128))])):(e.openBlock(),e.createElementBlock("div",He," Select a project to view commits "))])}}}),[["__scopeId","data-v-66f7e4aa"]]),tt={class:"quick-actions"},ot={class:"actions-grid"},nt={key:0,class:"error-message"},at=L(e.defineComponent({__name:"QuickActions",emits:["newProject","newBlogPost","newPage"],setup(o){const t=F();async function a(){await t.loadManifest();for(const n of t.projects)await t.refreshCommits(n.slug)}return(n,l)=>{const s=e.resolveComponent("q-btn"),i=e.resolveComponent("q-icon");return e.openBlock(),e.createElementBlock("div",tt,[l[3]||(l[3]=e.createElementVNode("div",{class:"actions-header"},[e.createElementVNode("span",{class:"actions-title"},"Quick Actions")],-1)),e.createElementVNode("div",ot,[e.createVNode(s,{outline:"",dense:"",icon:"folder_special",label:"New Project",class:"action-btn",onClick:l[0]||(l[0]=r=>n.$emit("newProject"))}),e.createVNode(s,{outline:"",dense:"",icon:"post_add",label:"New Blog Post",class:"action-btn",onClick:l[1]||(l[1]=r=>n.$emit("newBlogPost"))}),e.createVNode(s,{outline:"",dense:"",icon:"note_add",label:"New Page",class:"action-btn",onClick:l[2]||(l[2]=r=>n.$emit("newPage"))}),e.createVNode(s,{outline:"",dense:"",icon:"sync",label:"Refresh All",class:"action-btn",loading:e.unref(t).isLoading,onClick:a},null,8,["loading"])]),e.unref(t).error?(e.openBlock(),e.createElementBlock("div",nt,[e.createVNode(i,{name:"error",size:"16px"}),e.createTextVNode(" "+e.toDisplayString(e.unref(t).error),1)])):e.createCommentVNode("",!0)])}}}),[["__scopeId","data-v-f2f68117"]]),lt=e.defineComponent({__name:"NewProjectDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:t}){const a=t,n=F(),l=e.ref(null),s=e.ref(""),i=e.ref(""),r=e.ref(""),h=e.ref("concept"),w=e.ref(""),_=e.ref(!1),C=e.ref(!1),m=[{label:"Concept",value:"concept"},{label:"Active",value:"active"},{label:"Maintained",value:"maintained"},{label:"Paused",value:"paused"},{label:"Archived",value:"archived"}],c=e.computed(()=>n.userRepos.map(g=>({label:g.fullName,value:g.fullName,private:g.private,description:g.description||"No description"})));function V(g){if(!g)return;const u=n.userRepos.find(S=>S.fullName===g);u&&(s.value=u.name,i.value=z(u.name),r.value=u.description||"")}function d(g){(!i.value||i.value===z(s.value))&&(i.value=z(g))}async function p(){var g;if(!(!s.value||!i.value||!n.settings.projectId)){C.value=!0;try{const u=n.settings.projectId,S=w.value.split(",").map($=>$.trim()).filter($=>$),D=l.value||"",I=((g=n.userRepos.find($=>$.fullName===l.value))==null?void 0:g.private)||!1,f=`${B}/projects/${i.value}`;await Y(u,f);const y=Re(s.value,r.value||"A new project",h.value,S,D,I);await M(u,`${f}/index.md`,y);const N=Ae(D);await M(u,`${f}/config.yaml`,N),await Y(u,`${f}/posts`),await le(u,{slug:i.value,indexPath:`/content/projects/${i.value}/index.md`,configPath:`/content/projects/${i.value}/config.yaml`,posts:[]}),await n.loadManifest(),a("update:modelValue",!1),b()}catch(u){console.error("Failed to create project:",u),n.error=u instanceof Error?u.message:"Failed to create project"}finally{C.value=!1}}}function b(){l.value=null,s.value="",i.value="",r.value="",h.value="concept",w.value=""}return e.onMounted(async()=>{n.hasGitHubToken&&n.userRepos.length===0&&(_.value=!0,await n.fetchUserRepos(),_.value=!1)}),(g,u)=>{const S=e.resolveComponent("q-card-section"),D=e.resolveComponent("q-icon"),I=e.resolveComponent("q-item-section"),f=e.resolveComponent("q-item-label"),y=e.resolveComponent("q-item"),N=e.resolveComponent("q-select"),$=e.resolveComponent("q-input"),T=e.resolveComponent("q-btn"),P=e.resolveComponent("q-card-actions"),x=e.resolveComponent("q-card"),E=e.resolveComponent("q-dialog"),j=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(E,{"model-value":o.modelValue,"onUpdate:modelValue":u[6]||(u[6]=k=>g.$emit("update:modelValue",k))},{default:e.withCtx(()=>[e.createVNode(x,{style:{"min-width":"400px"}},{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>[...u[7]||(u[7]=[e.createElementVNode("div",{class:"text-h6"},"Create New Project",-1)])]),_:1}),e.createVNode(S,null,{default:e.withCtx(()=>[e.createVNode(N,{modelValue:l.value,"onUpdate:modelValue":[u[0]||(u[0]=k=>l.value=k),V],options:c.value,label:"GitHub Repository",hint:"Select a repository from your GitHub account",outlined:"",dense:"","emit-value":"","map-options":"",class:"q-mb-md",loading:_.value},{prepend:e.withCtx(()=>[e.createVNode(D,{name:"code"})]),option:e.withCtx(k=>[e.createVNode(y,e.normalizeProps(e.guardReactiveProps(k.itemProps)),{default:e.withCtx(()=>[e.createVNode(I,{avatar:""},{default:e.withCtx(()=>[e.createVNode(D,{name:k.opt.private?"lock":"public",size:"sm"},null,8,["name"])]),_:2},1024),e.createVNode(I,null,{default:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k.opt.label),1)]),_:2},1024),e.createVNode(f,{caption:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading"]),e.createVNode($,{modelValue:s.value,"onUpdate:modelValue":[u[1]||(u[1]=k=>s.value=k),d],label:"Title",hint:"Project display name",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode($,{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=k=>i.value=k),label:"Slug",hint:"URL-friendly identifier",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode($,{modelValue:r.value,"onUpdate:modelValue":u[3]||(u[3]=k=>r.value=k),label:"Tagline",hint:"Brief description",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode(N,{modelValue:h.value,"onUpdate:modelValue":u[4]||(u[4]=k=>h.value=k),options:m,label:"Status",outlined:"",dense:"","emit-value":"","map-options":"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode($,{modelValue:w.value,"onUpdate:modelValue":u[5]||(u[5]=k=>w.value=k),label:"Tech Stack",hint:"Comma-separated list",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),e.createVNode(P,{align:"right"},{default:e.withCtx(()=>[e.withDirectives(e.createVNode(T,{flat:"",label:"Cancel"},null,512),[[j]]),e.createVNode(T,{color:"primary",label:"Create Project",loading:C.value,onClick:p},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),st={class:"row items-center justify-end"},it=e.defineComponent({__name:"NewBlogPostDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:t}){const a=t,n=F(),l=e.ref(""),s=e.ref(ee(new Date)),i=e.ref(""),r=e.ref(null),h=e.ref(!1),w=e.computed(()=>[{label:"None",value:null},...n.projects.map(m=>({label:m.slug,value:m.slug}))]);async function _(){if(!(!l.value||!n.settings.projectId)){h.value=!0;try{const m=n.settings.projectId,c=i.value.split(",").map(g=>g.trim()).filter(g=>g),V=z(l.value),d=`${s.value}-${V}.md`,p=`${B}/blog/${d}`;await Y(m,`${B}/blog`);const b=Le(l.value,s.value,c,r.value||void 0);await M(m,p,b),await se(m,{path:`/content/blog/${d}`}),await n.loadManifest(),a("update:modelValue",!1),C()}catch(m){console.error("Failed to create blog post:",m),n.error=m instanceof Error?m.message:"Failed to create blog post"}finally{h.value=!1}}}function C(){l.value="",s.value=ee(new Date),i.value="",r.value=null}return(m,c)=>{const V=e.resolveComponent("q-card-section"),d=e.resolveComponent("q-input"),p=e.resolveComponent("q-btn"),b=e.resolveComponent("q-date"),g=e.resolveComponent("q-popup-proxy"),u=e.resolveComponent("q-icon"),S=e.resolveComponent("q-select"),D=e.resolveComponent("q-card-actions"),I=e.resolveComponent("q-card"),f=e.resolveComponent("q-dialog"),y=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(f,{"model-value":o.modelValue,"onUpdate:modelValue":c[5]||(c[5]=N=>m.$emit("update:modelValue",N))},{default:e.withCtx(()=>[e.createVNode(I,{style:{"min-width":"400px"}},{default:e.withCtx(()=>[e.createVNode(V,null,{default:e.withCtx(()=>[...c[6]||(c[6]=[e.createElementVNode("div",{class:"text-h6"},"Create New Blog Post",-1)])]),_:1}),e.createVNode(V,null,{default:e.withCtx(()=>[e.createVNode(d,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=N=>l.value=N),label:"Title",hint:"Blog post title",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode(d,{modelValue:s.value,"onUpdate:modelValue":c[2]||(c[2]=N=>s.value=N),label:"Date",hint:"Publication date (YYYY-MM-DD)",outlined:"",dense:"",class:"q-mb-md"},{append:e.withCtx(()=>[e.createVNode(u,{name:"event",class:"cursor-pointer"},{default:e.withCtx(()=>[e.createVNode(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(b,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=N=>s.value=N),mask:"YYYY-MM-DD"},{default:e.withCtx(()=>[e.createElementVNode("div",st,[e.withDirectives(e.createVNode(p,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.createVNode(d,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=N=>i.value=N),label:"Tags",hint:"Comma-separated list",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode(S,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=N=>r.value=N),options:w.value,label:"Related Project",hint:"Optional: Link to a project",outlined:"",dense:"","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"])]),_:1}),e.createVNode(D,{align:"right"},{default:e.withCtx(()=>[e.withDirectives(e.createVNode(p,{flat:"",label:"Cancel"},null,512),[[y]]),e.createVNode(p,{color:"primary",label:"Create Blog Post",loading:h.value,onClick:_},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),rt=e.defineComponent({__name:"NewPageDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:t}){const a=t,n=F(),l=e.ref(""),s=e.ref(""),i=e.ref(!1);function r(_){s.value=z(_)}async function h(){if(!(!l.value||!s.value||!n.settings.projectId)){i.value=!0;try{const _=n.settings.projectId,C=`${B}/pages/${s.value}.md`;await Y(_,`${B}/pages`);const m=ze(l.value);await M(_,C,m),await ie(_,{path:`/content/pages/${s.value}.md`}),await n.loadManifest(),a("update:modelValue",!1),w()}catch(_){console.error("Failed to create page:",_),n.error=_ instanceof Error?_.message:"Failed to create page"}finally{i.value=!1}}}function w(){l.value="",s.value=""}return(_,C)=>{const m=e.resolveComponent("q-card-section"),c=e.resolveComponent("q-input"),V=e.resolveComponent("q-btn"),d=e.resolveComponent("q-card-actions"),p=e.resolveComponent("q-card"),b=e.resolveComponent("q-dialog"),g=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(b,{"model-value":o.modelValue,"onUpdate:modelValue":C[2]||(C[2]=u=>_.$emit("update:modelValue",u))},{default:e.withCtx(()=>[e.createVNode(p,{style:{"min-width":"350px"}},{default:e.withCtx(()=>[e.createVNode(m,null,{default:e.withCtx(()=>[...C[3]||(C[3]=[e.createElementVNode("div",{class:"text-h6"},"Create New Page",-1)])]),_:1}),e.createVNode(m,null,{default:e.withCtx(()=>[e.createVNode(c,{modelValue:l.value,"onUpdate:modelValue":[C[0]||(C[0]=u=>l.value=u),r],label:"Title",hint:"Page title",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),e.createVNode(c,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=u=>s.value=u),label:"Filename",hint:"Without .md extension",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),e.createVNode(d,{align:"right"},{default:e.withCtx(()=>[e.withDirectives(e.createVNode(V,{flat:"",label:"Cancel"},null,512),[[g]]),e.createVNode(V,{color:"primary",label:"Create Page",loading:i.value,onClick:h},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),ct={class:"text-weight-bold"},dt=e.defineComponent({__name:"ConfirmDeleteDialog",props:{modelValue:{type:Boolean},itemName:{},itemType:{}},emits:["update:modelValue","confirm"],setup(o,{emit:t}){const a=t;function n(){a("confirm"),a("update:modelValue",!1)}return(l,s)=>{const i=e.resolveComponent("q-card-section"),r=e.resolveComponent("q-btn"),h=e.resolveComponent("q-card-actions"),w=e.resolveComponent("q-card"),_=e.resolveComponent("q-dialog"),C=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(_,{"model-value":o.modelValue,"onUpdate:modelValue":s[0]||(s[0]=m=>l.$emit("update:modelValue",m))},{default:e.withCtx(()=>[e.createVNode(w,{style:{"min-width":"350px"}},{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[...s[1]||(s[1]=[e.createElementVNode("div",{class:"text-h6"},"Confirm Delete",-1)])]),_:1}),e.createVNode(i,null,{default:e.withCtx(()=>[e.createElementVNode("p",null," Are you sure you want to delete this "+e.toDisplayString(o.itemType)+"? ",1),e.createElementVNode("p",ct,e.toDisplayString(o.itemName),1),s[2]||(s[2]=e.createElementVNode("p",{class:"text-negative text-caption"}," This action cannot be undone. All associated files will be removed. ",-1))]),_:1}),e.createVNode(h,{align:"right"},{default:e.withCtx(()=>[e.withDirectives(e.createVNode(r,{flat:"",label:"Cancel"},null,512),[[C]]),e.createVNode(r,{color:"negative",label:"Delete",onClick:n})]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),mt={class:"spg-context"},pt={key:0,class:"not-configured"};return{id:"spg",name:"Portfolio Generator",icon:"web",version:"1.0.0",order:100,navigationComponent:_e,contextComponent:L(e.defineComponent({__name:"PluginContext",setup(o){const t=F(),a=e.ref(!1),n=e.ref(!1),l=e.ref(!1),s=e.ref(!1),i=e.ref(""),r=e.ref("project"),h=e.ref(null);function w(V){console.log("Open file:",V)}function _(V){i.value=V.slug,r.value="project",h.value={type:"project",data:V},s.value=!0}function C(V){i.value=V.path.split("/").pop()||V.path,r.value="blog",h.value={type:"blog",data:V},s.value=!0}function m(V){i.value=V.path.split("/").pop()||V.path,r.value="page",h.value={type:"page",data:V},s.value=!0}async function c(){h.value&&(console.log("Delete:",h.value),h.value=null,s.value=!1,await t.loadManifest())}return(V,d)=>{const p=e.resolveComponent("q-icon"),b=e.resolveComponent("q-separator");return e.openBlock(),e.createElementBlock("div",mt,[e.unref(t).isConfigured?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(Ue,{onNewProject:d[0]||(d[0]=g=>a.value=!0),onNewBlogPost:d[1]||(d[1]=g=>n.value=!0),onNewPage:d[2]||(d[2]=g=>l.value=!0),onDeleteProject:_,onDeleteBlogPost:C,onDeletePage:m,onOpenFile:w}),e.createVNode(b,{class:"q-my-md"}),e.createVNode(et),e.createVNode(b,{class:"q-my-md"}),e.createVNode(at,{onNewProject:d[3]||(d[3]=g=>a.value=!0),onNewBlogPost:d[4]||(d[4]=g=>n.value=!0),onNewPage:d[5]||(d[5]=g=>l.value=!0)})],64)):(e.openBlock(),e.createElementBlock("div",pt,[e.createVNode(p,{name:"info",size:"48px"}),d[10]||(d[10]=e.createElementVNode("p",null,"No project selected",-1)),d[11]||(d[11]=e.createElementVNode("p",{class:"hint"},"Open the Portfolio nav panel and configure a project ID in settings.",-1))])),e.createVNode(lt,{modelValue:a.value,"onUpdate:modelValue":d[6]||(d[6]=g=>a.value=g)},null,8,["modelValue"]),e.createVNode(it,{modelValue:n.value,"onUpdate:modelValue":d[7]||(d[7]=g=>n.value=g)},null,8,["modelValue"]),e.createVNode(rt,{modelValue:l.value,"onUpdate:modelValue":d[8]||(d[8]=g=>l.value=g)},null,8,["modelValue"]),e.createVNode(dt,{modelValue:s.value,"onUpdate:modelValue":d[9]||(d[9]=g=>s.value=g),"item-name":i.value,"item-type":r.value,onConfirm:c},null,8,["modelValue","item-name","item-type"])])}}}),[["__scopeId","data-v-63901cb3"]]),requiresRepository:!1,onRegister:()=>{console.log("[SPG Plugin] Registered")},onActivate:()=>{console.log("[SPG Plugin] Activated")},onDeactivate:()=>{console.log("[SPG Plugin] Deactivated")}}}(Vue,Pinia);exports.default=SPGPlugin.default||SPGPlugin;
